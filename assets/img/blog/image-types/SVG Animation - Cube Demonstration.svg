<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="body" viewBox="0 0 180 180" xml:space="preserve" onload="init(evt)">
	<script xlink:href="SVG%20Animation%20-%20Cube%20Demonstration_files/svg3d.js"/>
	<script type="text/ecmascript"><![CDATA[

	var _focalDistance = 400;
	//the bigger it is, the less the z length is deformed
	var _deformingDistance = 1400;
	
	var _xOrigin = 90;
    var _yOrigin = 90;
    
	var axeArray = new Array();
    var faceArray = new Array();
    var textArray = new Array();
    
	var rotationX = 0;
	var rotationY = 0;
	var rotationZ = 0;
	
	var angle = Math.PI / 2;
	var dpi = 2*Math.PI;
	var size = 180;
	
    var rotationTime = 150;
	var clockRotation;
	
	function init(evt) {
		faceArray[0] = new Path('face0');
		faceArray[1] = new Path('face1');
		faceArray[2] = new Path('face2');
		faceArray[3] = new Path('face3');
		faceArray[4] = new Path('face4');
		faceArray[5] = new Path('face5');
		
		textArray[0] = new Path('text_face0');
		textArray[1] = new Path('text_face1');
		textArray[2] = new Path('text_face2');
		textArray[3] = new Path('text_face3');
		textArray[4] = new Path('text_face4');
		textArray[5] = new Path('text_face5');
		
		clockRotation = window.setInterval("rotateCube()", rotationTime);
	}
	
	function toggleRotation() {
		if (!clockRotation) {
			clockRotation = window.setInterval("rotateCube()", rotationTime);
		} else {
			clockRotation = window.clearInterval(clockRotation);
		}
	}
	
	function rotateCube() {
		var i;
		for (i in faceArray) {
			applyTransform(i,faceArray[i]);
		}
		sortFaces()
		incrementRotation(0.07,0.03,0.02);
	}
	
	function sortFaces() {
		//will contain the index of the faces in the order they have to be displayed
		var indexPathsSorted = sortZ(faceArray);
		var parentNode = faceArray[0].domNode.parentNode;
		for (i in indexPathsSorted) {
			var index = indexPathsSorted[i];
			if (i > 2) {
				//no need to remove child before
				parentNode.appendChild(faceArray[index].domNode);
				
				applyTransform(index,textArray[index]);
				parentNode.appendChild(textArray[index].domNode);
				
				faceArray[index].domNode.style.display = "";
				textArray[index].domNode.style.display = "";
			} else {
				faceArray[index].domNode.style.display = "none";
				textArray[index].domNode.style.display = "none";
			}
		}
	}
	
	function applyTransform(index,face) {
		var matrixArray = new Array();
		//is applied to everything
		matrixArray[0] = setAnglesRotationMatrix(rotationX,rotationY,rotationZ);
		if (index == 0) {
			matrixArray[1] = setTranslationMatrix(0,0,-size);
		} else if (index == 1) {
			matrixArray[1] = setTranslationMatrix(0,-size,0);
			matrixArray[2] = setRotationMatrix(0,-1,1,0,1,0);
		} else if (index == 2) {
			matrixArray[1] = setTranslationMatrix(-size,0,0);
			matrixArray[2] = setRotationMatrix(1,0,0,-1,1,0);
		} else if (index == 3) {
			matrixArray[1] = setTranslationMatrix(0,0,size);
		} else if (index == 4) {
			matrixArray[1] = setTranslationMatrix(0,size,0);
			matrixArray[2] = setRotationMatrix(0,-1,1,0,1,0);
		} else if (index == 5) {
			matrixArray[1] = setTranslationMatrix(size,0,0);
			matrixArray[2] = setRotationMatrix(1,0,0,-1,1,0);
		}
		transformPath(face,matrixArray);
	}
	
	function incrementRotation(incRotX,incRotY,incRotZ) {
		rotationX += incRotX;
		if (rotationX > dpi) {
			rotationX -= dpi;
		}		
		rotationY += incRotY;
		if (rotationY > dpi) {
			rotationY -= dpi;
		}
		rotationZ += incRotZ;
		if (rotationZ > dpi) {
			rotationZ -= dpi;
		}
	}
	
	
]]></script>
	<title>SVG Animation - Cube Demonstration</title>
	
	<g id="g2" onclick="toggleRotation()">
		
		<!-- x 20,20 40,100 30,60 20,100 40,20 -->
		<!-- html -->
		
		
		
		<!-- xml -->
		
		
		
		<!-- rng -->
		
		
		
		<!-- xsd -->
		
		
		
		<!-- svg -->
		
		
		
		<!-- xsl -->
		
		
		
	<path id="face2" style="fill: yellow; display: none;" d="M129.96319310801437,168.29521789366606L116.04194458754121,140.58747751833033L30.018707360155346,114.10050600130971L19.17917681394296,134.80219158689863z"/><path id="text_face2" style="fill: none; stroke-width: 2px; stroke: black; display: none;" d="M60.62305978338202,137.6938222881412 L51.11336699889364,146.03837598541583 C74.3712006472818,146.02989204902195 77.55732258092081,141.4894666888949 56.27369656861439,141.51029624971642 L76.30939010912908,137.6703647550946 M80.241401229743,137.664484776866 L74.3712006472818,146.02989204902195 L96.0113599670207,137.6409021848549 L93.08345616362838,146.02306623764213 M116.27914496694865,142.51720703136797 C88.80404830031108,158.27439045039569 98.14068734450976,131.5449466484998 116.08330715126257,140.43096951645228 L107.64707692362298,140.44038436745825"/><path id="face3" style="fill: orange; display: none;" d="M116.04194458754121,140.58747751833033L144.85253717175624,55.29955783004327L57.568181323551684,26.460124617740874L30.018707360155346,114.10050600130971z"/><path id="text_face3" style="fill: none; stroke-width: 2px; stroke: black; display: none;" d="M144.87199661691557,127.08021649812275L139.45808093574087,105.75259763119065 M139.59275159451641,121.65915634488442L144.70997971216678,108.17018664482235 M143.75024641831266,84.74533791481986C146.34797622275815,108.92420010489663 142.18699160022578,107.00878795825001 141.74738641724775,93.90571031395595C141.3173688673474,81.08840614437614 138.20201386164098,82.33194612665869 139.98715692990197,101.9563766628042 M144.46717687623124,79.83111373680582C144.2246406747415,51.52316144140477 139.0545666974545,58.09171157426182 139.2562305626086,81.91113995360877L144.46717687623124,79.83111373680582"/><path id="face1" style="fill: royalblue; display: none;" d="M129.96319310801437,168.29521789366606L167.57946581683836,58.82854137999856L144.85253717175624,55.29955783004327L116.04194458754121,140.58747751833033z"/><path id="text_face1" style="fill: none; stroke-width: 2px; stroke: black; display: none;" d="M131.23437659400668,144.98825688967972L131.86369178996495,115.95722253289179 M127.17440535413377,130.8104285346721L136.8139859210135,127.4364520519378 M133.0415701682257,112.22632009458744L138.2167310476554,123.02382972357131L137.97774390627688,109.05381973931094L143.85940165856255,105.27365269111708L137.77550112055312,97.23170362248439 M145.27804559259852,100.81101740517978L138.96462024767078,93.46519637294271L143.74383632506016,78.32714031774611"/><path id="face4" style="fill: limegreen;" d="M19.17917681394296,134.80219158689863L54.697473946056995,21.423487324810097L57.568181323551684,26.460124617740874L30.018707360155346,114.10050600130971z"/><path id="text_face4" style="fill: none; stroke-width: 2px; stroke: black;" d="M33.623355304449724,97.69842997349191L31.125760669628256,105.65343482060577C42.964870513505126,77.7418178729072 26.233744127588686,101.63958591922912 29.556863056243664,108.37378745251124 M33.902553895332325,90.6859039737522L41.52512573029574,75.63027011719969L39.53664189741618,72.7139347891995 M41.555682162830635,67.62120957782268C47.13389934635561,45.567333087292674 49.540541713468095,45.28603247758123 45.80930714029196,57.75777187431438C42.17984350869682,69.8893395030534 44.79474091462986,67.09499084079769 49.56078304819734,49.05873302864709"/><path id="face5" style="fill: white;" d="M167.57946581683836,58.82854137999856L144.85253717175624,55.29955783004327L57.568181323551684,26.460124617740874L54.697473946056995,21.423487324810097z"/><path id="text_face5" style="fill: none; stroke-width: 2px; stroke: black;" d="M73.7156090610414,28.29412929918793L73.41246159179215,28.981331249414623L142.99246759597173,52.01547996004608 M133.6652810227155,49.11081941894727C154.1499130210696,56.74323228963983 109.90806690073882,42.10812624297025 107.12053827783164,40.68059447768385C104.13627279302352,39.152311058241 55.65453828310556,23.102650436140422 81.41610222407661,32.51723874264884 M138.16973084445195,51.4570229356313L72.76404366367605,30.45122333153178 M73.00666667655622,29.90122366294132L135.28136607453388,51.122559812732334"/><path id="face0" style="fill: red;" d="M129.96319310801437,168.29521789366606L167.57946581683836,58.82854137999856L54.697473946056995,21.423487324810097L19.17917681394296,134.80219158689863z"/><path id="text_face0" style="fill: none; stroke-width: 2px; stroke: black;" d="M41.93789574071782,128.28771422207478L47.818254287381755,109.81962885574549L122.05153466344842,132.8456680307392 M49.29676528891479,105.17615904439187L123.58795340163333,128.30872428994297L89.79404945065585,107.63310961805998L130.80389032752464,107.00053593200913L56.241518889338025,83.36519270229667 M131.3222321570562,105.4699065139742L137.57298945870215,87.0118302681442 M134.44051776597763,96.26181367847246L59.74196880240905,72.37154200869546 M139.14457537268106,82.37104016428637L64.2703661738825,58.14947909103908 M102.03900475717592,70.36750978395389L108.24626730786993,51.476680337134596 M145.4668717271146,63.701713788722465L70.35744149289295,39.03217089789539"/></g>
	
</svg>